/*
 * Nios2 dynamic assembler
 */

#ifndef ASM_NIOS2_H
#define ASM_NIOS2_H

#define NIOS2_IMM26(i)        (((uint32_t)(i)&0x3ffffff)<<6)
#define NIOS2_A(i)            (((uint32_t)(i)&0x1f)<<27)
#define NIOS2_B(i)            (((uint32_t)(i)&0x1f)<<22)
#define NIOS2_C(i)            (((uint32_t)(i)&0x1f)<<17)
#define NIOS2_IMM16(i)        (((uint32_t)(i)&0xffff)<<6)
#define NIOS2_OPX(i)          (((uint32_t)(i)&0x3f)<<11)
#define NIOS2_IMM5(i)         (((uint32_t)(i)&0x1f)<<6)
#define NIOS2_OP(i)           (((uint32_t)(i)&0x3f))

#define NIOS2_GET_IMM26(i)    (((i)>>6)&0x3ffffff)
#define NIOS2_GET_A(i)        (((i)>>27)&0x1f)
#define NIOS2_GET_B(i)        (((i)>>22)&0x1f)
#define NIOS2_GET_C(i)        (((i)>>17)&0x1f)
#define NIOS2_GET_IMM16(i)    (((i)>>6)&0xffff)
#define NIOS2_GET_OPX(i)      (((i)>>11)&0x3f)
#define NIOS2_GET_IMM5(i)     (((i)>>6)&0x1f)
#define NIOS2_GET_OP(i)       (((i)&0x3f))

#define NIOS2_add(c,a,b)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x31)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_addi(b,a,sv)    (NIOS2_OP(0x04)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_and(c,a,b)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x0e)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_andhi(b,a,uv)   (NIOS2_OP(0x2c)|NIOS2_IMM16(uv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_andi(b,a,uv)    (NIOS2_OP(0x0c)|NIOS2_IMM16(uv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_beq(a,b,sv)     (NIOS2_OP(0x26)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_bge(a,b,sv)     (NIOS2_OP(0x0e)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_bgeu(a,b,sv)    (NIOS2_OP(0x2e)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_bgt(a,b,sv)     NIOS2_blt(b,a,sv)
#define NIOS2_bgtu(a,b,sv)    NIOS2_bltu(b,a,sv)
#define NIOS2_ble(a,b,sv)     NIOS2_bge(b,a,sv)
#define NIOS2_bleu(a,b,sv)    NIOS2_bgeu(b,a,sv)
#define NIOS2_blt(a,b,sv)     (NIOS2_OP(0x16)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_bltu(a,b,sv)    (NIOS2_OP(0x36)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_bne(a,b,sv)     (NIOS2_OP(0x1e)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_br(sv)          (NIOS2_OP(0x06)|NIOS2_IMM16(sv))
#define NIOS2_break(imm5)     (NIOS2_OP(0x3a)|NIOS2_OPX(0x34)|NIOS2_C(30)|NIOS_IMM5(imm5))
#define NIOS2_bret()          (NIOS2_OP(0x3a)|NIOS2_OPX(0x09)|NIOS2_A(30))
#define NIOS2_call(imm26)     (NIOS2_OP(0x00)|NIOS2_IMM26(imm26))
#define NIOS2_callr(a)        (NIOS2_OP(0x3a)|NIOS2_OPX(0x1d)|NIOS2_A(a)|NIOS2_C(31))
#define NIOS2_cmpeq(c,a,b)    (NIOS2_OP(0x3a)|NIOS2_OPX(0x20)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_cmpeqi(b,a,sv)  (NIOS2_OP(0x20)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_cmpge(c,a,b)    (NIOS2_OP(0x3a)|NIOS2_OPX(0x08)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_cmpgei(b,a,sv)  (NIOS2_OP(0x08)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_cmpgeu(c,a,b)   (NIOS2_OP(0x3a)|NIOS2_OPX(0x28)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_cmpgeui(b,a,sv) (NIOS2_OP(0x28)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_cmpgt(c,a,b)    NIOS2_cmplt(c,b,a)
#define NIOS2_cmpgti(b,a,sv)  NIOS2_cmpgei(b,a,(sv)+1)
#define NIOS2_cmpgtu(c,a,b)   NIOS2_cmpltu(c,b,a)
#define NIOS2_cmpgtui(b,a,sv) NIOS2_cmpgeui(b,a,(sv)+1)
#define NIOS2_cmple(c,a,b)    NIOS2_cmpge(c,b,a)
#define NIOS2_cmplei(b,a,sv)  NIOS2_cmplti(b,a,(sv)+1)
#define NIOS2_cmpleu(c,a,b)   NIOS2_cmpgeu(c,b,a)
#define NIOS2_cmpleui(b,a,sv) NIOS2_cmpltui(b,a,(sv)+1)
#define NIOS2_cmplt(c,a,b)    (NIOS2_OP(0x3a)|NIOS2_OPX(0x10)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_cmplti(b,a,sv)  (NIOS2_OP(0x10)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_cmpltu(c,a,b)   (NIOS2_OP(0x3a)|NIOS2_OPX(0x30)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_cmpltui(b,a,sv) (NIOS2_OP(0x30)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_cmpne(c,a,b)    (NIOS2_OP(0x3a)|NIOS2_OPX(0x18)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_cmpnei(b,a,sv)  (NIOS2_OP(0x18)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_custom(n,a,b,c,ra,rb,wc)  \
                              (NIOS2_OP(0x32)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c)|\
                               (((ra)&1)<<16)|(((rb)&1)<<15)|(((wc)&1)<<14)|(((n)&0xff)<<6))
#define NIOS2_div(c,a,b)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x25)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_divu(c,a,b)     (NIOS2_OP(0x3a)|NIOS2_OPX(0x24)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_eret()          (NIOS2_OP(0x3a)|NIOS2_OPX(0x01)|NIOS2_A(29)|NIOS2_B(30))
#define NIOS2_flushd(sv,a)    (NIOS2_OP(0x3b)|NIOS2_IMM16(sv)|NIOS2_A(a))
#define NIOS2_flushda(sv,a)   (NIOS2_OP(0x1b)|NIOS2_IMM16(sv)|NIOS2_A(a))
#define NIOS2_flashi(a)       (NIOS2_OP(0x3a)|NIOS2_OPX(0x0c)|NIOS2_A(a))
#define NIOS2_flashp()        (NIOS2_OP(0x3a)|NIOS2_OPX(0x04))
#define NIOS2_initd(sv,a)     (NIOS2_OP(0x33)|NIOS2_IMM16(sv)|NIOS2_A(a))
#define NIOS2_initda(sv,a)    (NIOS2_OP(0x13)|NIOS2_IMM16(sv)|NIOS2_A(a))
#define NIOS2_initi(a)        (NIOS2_OP(0x3a)|NIOS2_OPX(0x29)|NIOS2_A(a))
#define NIOS2_jmp(a)          (NIOS2_OP(0x3a)|NIOS2_OPX(0x0d)|NIOS2_A(a))
#define NIOS2_jmpi(imm26)     (NIOS2_OP(0x01)|NIOS2_IMM26(imm26))
#define NIOS2_ldb(b,sv,a)     (NIOS2_OP(0x07)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_ldbio(b,sv,a)   (NIOS2_OP(0x27)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_ldbu(b,sv,a)    (NIOS2_OP(0x03)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_ldbuio(b,sv,a)  (NIOS2_OP(0x23)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_ldh(b,sv,a)     (NIOS2_OP(0x0f)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_ldhio(b,sv,a)   (NIOS2_OP(0x2f)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_ldhu(b,sv,a)    (NIOS2_OP(0x0b)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_ldhuio(b,sv,a)  (NIOS2_OP(0x2b)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_ldw(b,sv,a)     (NIOS2_OP(0x17)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_ldwio(b,sv,a)   (NIOS2_OP(0x37)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_mov(c,a)        NIOS2_add(c,a,0)
#define NIOS2_movhi(b,uv)     NIOS2_orhi(b,0,uv)
#define NIOS2_movi(b,sv)      NIOS2_addi(b,0,sv)
#define NIOS2_movui(b,uv)     NIOS2_ori(b,0,uv)
#define NIOS2_mul(c,a,b)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x27)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_muli(b,a,sv)    (NIOS2_OP(0x24)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_mulxss(c,a,b)   (NIOS2_OP(0x3a)|NIOS2_OPX(0x1f)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_mulxsu(c,a,b)   (NIOS2_OP(0x3a)|NIOS2_OPX(0x17)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_mulxuu(c,a,b)   (NIOS2_OP(0x3a)|NIOS2_OPX(0x07)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_nextpc(c)       (NIOS2_OP(0x3a)|NIOS2_OPX(0x1c)|NIOS2_C(c))
#define NIOS2_nop()           NIOS2_add(0,0,0)
#define NIOS2_nor(c,a,b)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x06)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_or(c,a,b)       (NIOS2_OP(0x3a)|NIOS2_OPX(0x16)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_orhi(b,a,uv)    (NIOS2_OP(0x34)|NIOS2_IMM16(uv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_ori(b,a,uv)     (NIOS2_OP(0x14)|NIOS2_IMM16(uv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_rdctl(c,n)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x26)|NIOS2_IMM5(n)|NIOS2_C(c))
#define NIOS2_rdprs(b,a,sv)   (NIOS2_OP(0x38)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_ret()           (NIOS2_OP(0x3a)|NIOS2_OPX(0x05)|NIOS2_A(31))
#define NIOS2_rol(c,a,b)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x03)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_roli(c,a,imm5)  (NIOS2_OP(0x3a)|NIOS2_OPX(0x02)|NIOS2_IMM5(imm5)|NIOS2_A(a)|NIOS2_C(c))
#define NIOS2_ror(c,a,b)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x0b)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_rori(c,a,imm5)  NIOS2_roli(c,a,32-(imm5))
#define NIOS2_sll(c,a,b)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x13)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_slli(c,a,imm5)  (NIOS2_OP(0x3a)|NIOS2_OPX(0x12)|NIOS2_IMM5(imm5)|NIOS2_A(a)|NIOS2_C(c))
#define NIOS2_sra(c,a,b)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x3b)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_srai(c,a,imm5)  (NIOS2_OP(0x3a)|NIOS2_OPX(0x3a)|NIOS2_IMM5(imm5)|NIOS2_A(a)|NIOS2_C(c))
#define NIOS2_srl(c,a,b)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x1b)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_srli(c,a,imm5)  (NIOS2_OP(0x3a)|NIOS2_OPX(0x1a)|NIOS2_IMM5(imm5)|NIOS2_A(a)|NIOS2_C(c))
#define NIOS2_stb(b,sv,a)     (NIOS2_OP(0x05)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_stbio(b,sv,a)   (NIOS2_OP(0x25)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_sth(b,sv,a)     (NIOS2_OP(0x0d)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_sthio(b,sv,a)   (NIOS2_OP(0x2d)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_stw(b,sv,a)     (NIOS2_OP(0x15)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_stwio(b,sv,a)   (NIOS2_OP(0x35)|NIOS2_IMM16(sv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_sub(c,b,a)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x39)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_subi(b,a,sv)    NIOS2_addi(b,a,-(sv))
#define NIOS2_sync()          (NIOS2_OP(0x3a)|NIOS2_OPX(0x36))
#define NIOS2_trap(imm5)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x2d)|NIOS2_IMM5(imm5)|NIOS2_C(29))
#define NIOS2_wrctl(n,a)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x2e)|NIOS2_IMM5(n)|NIOS2_A(a))
#define NIOS2_wrprs(c,a)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x14)|NIOS2_A(a)|NIOS2_C(c))
#define NIOS2_xor(c,a,b)      (NIOS2_OP(0x3a)|NIOS2_OPX(0x1e)|NIOS2_A(a)|NIOS2_B(b)|NIOS2_C(c))
#define NIOS2_xorhi(b,a,uv)   (NIOS2_OP(0x3c)|NIOS2_IMM16(uv)|NIOS2_A(a)|NIOS2_B(b))
#define NIOS2_xori(b,a,uv)    (NIOS2_OP(0x1c)|NIOS2_IMM16(uv)|NIOS2_A(a)|NIOS2_B(b))

#endif  /* !ASM_NIOS2_H */
